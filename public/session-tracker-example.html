<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPick Session Tracker - Integration Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .code-block {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .highlight {
            background: #fff3cd;
            padding: 10px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        .step {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .step h3 {
            margin-top: 0;
            color: #0066cc;
        }
    </style>
</head>
<body>
    <h1>iPick Session Tracker - Integration Guide</h1>
    
    <p>This guide shows how to integrate the iPick Session Tracker into your business website to track user sessions and link them with checkout data.</p>

    <div class="step">
        <h3>Step 1: Include the Tracker Script</h3>
        <p>Add the following script tag to your website's &lt;head&gt; section:</p>
        <div class="code-block">
&lt;script src="https://your-domain.com/session-tracker.js"&gt;&lt;/script&gt;
        </div>
    </div>

    <div class="step">
        <h3>Step 2: Configure the Tracker</h3>
        <p>Add the configuration before the closing &lt;/head&gt; tag:</p>
        <div class="code-block">
&lt;script&gt;
window.iPickTrackerConfig = {
    apiUrl: 'https://your-domain.com/api/track-session',
    businessId: 'your-business-domain.com', // Your business domain or ID
    affiliateId: 'your-affiliate-id', // Your affiliate ID
    debug: true // Set to false in production
};
&lt;/script&gt;
        </div>
    </div>

    <div class="step">
        <h3>Step 3: Complete Integration Example</h3>
        <p>Here's a complete example of how your HTML should look:</p>
        <div class="code-block">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Your Business Website&lt;/title&gt;
    
    &lt;!-- iPick Session Tracker --&gt;
    &lt;script src="https://your-domain.com/session-tracker.js"&gt;&lt;/script&gt;
    &lt;script&gt;
    window.iPickTrackerConfig = {
        apiUrl: 'https://your-domain.com/api/track-session',
        businessId: 'your-business-domain.com',
        affiliateId: 'your-affiliate-id',
        debug: false
    };
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- Your website content --&gt;
    &lt;h1&gt;Welcome to Your Store&lt;/h1&gt;
    
    &lt;!-- Product links will be automatically tracked --&gt;
    &lt;a href="/products/product-1"&gt;Product 1&lt;/a&gt;
    &lt;a href="/products/product-2"&gt;Product 2&lt;/a&gt;
    
    &lt;!-- Add to cart forms will be automatically tracked --&gt;
    &lt;form action="/cart/add" method="post"&gt;
        &lt;input type="hidden" name="id" value="123"&gt;
        &lt;button type="submit"&gt;Add to Cart&lt;/button&gt;
    &lt;/form&gt;
    
    &lt;!-- Checkout completion tracking (for Shopify) --&gt;
    &lt;script&gt;
    // If using Shopify, the tracker will automatically detect checkout completion
    // For other platforms, you can manually track checkout completion:
    if (window.location.href.includes('thank-you') || window.location.href.includes('order-confirmation')) {
        // Get order details from your page
        const orderData = {
            totalPrice: '99.99',
            orderId: 'ORDER123',
            currency: 'USD'
        };
        
        // Track the completion
        if (window.iPickTracker) {
            window.iPickTracker.trackCheckoutComplete(orderData);
        }
    }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
        </div>
    </div>

    <div class="highlight">
        <h3>What Gets Tracked Automatically</h3>
        <ul>
            <li><strong>Page Views:</strong> Every page load is tracked with title and URL</li>
            <li><strong>Product Views:</strong> Clicks on product links are tracked</li>
            <li><strong>Add to Cart:</strong> Form submissions with cart/checkout actions</li>
            <li><strong>Checkout Start:</strong> When users enter checkout pages</li>
            <li><strong>Checkout Completion:</strong> When orders are completed (Shopify integration)</li>
            <li><strong>User Sessions:</strong> Unique session tracking with timeout handling</li>
        </ul>
    </div>

    <div class="step">
        <h3>Step 4: Manual Event Tracking (Optional)</h3>
        <p>You can also manually track custom events:</p>
        <div class="code-block">
&lt;script&gt;
// Track a custom event
if (window.iPickTracker) {
    window.iPickTracker.track('custom_event', {
        event_name: 'newsletter_signup',
        user_email: 'user@example.com'
    });
}

// Track checkout completion manually
window.iPickTracker.trackCheckoutComplete({
    totalPrice: '149.99',
    orderId: 'ORDER456',
    currency: 'EUR'
});

// Track order creation manually
window.iPickTracker.trackOrderCreated({
    orderId: 'ORDER789',
    totalPrice: '299.99',
    currency: 'USD',
    financialStatus: 'paid',
    fulfillmentStatus: 'unfulfilled'
});
&lt;/script&gt;
        </div>
    </div>

    <div class="step">
        <h3>Step 5: Shopify Integration</h3>
        <p>If you're using Shopify, the tracker will automatically:</p>
        <ul>
            <li>Detect Shopify checkout pages</li>
            <li>Track checkout completion events</li>
            <li>Capture order details from Shopify.checkout object</li>
            <li>Link sessions with order data</li>
        </ul>
        
        <p>For Shopify stores, add this to your checkout.liquid template:</p>
        <div class="code-block">
{% if checkout.order_id %}
&lt;script&gt;
// Track checkout completion for Shopify
if (window.iPickTracker) {
    window.iPickTracker.trackCheckoutComplete({
        totalPrice: '{{ checkout.total_price }}',
        orderId: '{{ checkout.order_id }}',
        currency: '{{ checkout.currency }}'
    });
}
&lt;/script&gt;
{% endif %}
        </div>
    </div>

    <div class="highlight">
        <h3>Session Linking with Checkout Data</h3>
        <p>The tracker automatically links user sessions with checkout data by:</p>
        <ul>
            <li>Tracking the same session ID throughout the user journey</li>
            <li>Capturing checkout tokens and order IDs</li>
            <li>Linking session events with final purchase data</li>
            <li>Identifying revenue from app redirects vs direct traffic</li>
        </ul>
    </div>

    <div class="step">
        <h3>Testing the Integration</h3>
        <p>To test if the tracker is working:</p>
        <ol>
            <li>Set <code>debug: true</code> in the configuration</li>
            <li>Open your browser's developer console</li>
            <li>Navigate through your website</li>
            <li>Look for "iPick Tracker" log messages</li>
            <li>Check the Network tab for API calls to your tracking endpoint</li>
        </ol>
    </div>

    <div class="step">
        <h3>Production Deployment</h3>
        <p>Before going live:</p>
        <ul>
            <li>Set <code>debug: false</code> in production</li>
            <li>Update the <code>apiUrl</code> to your production domain</li>
            <li>Test the integration thoroughly</li>
            <li>Monitor the tracking data in your business dashboard</li>
        </ul>
    </div>

    <div class="highlight">
        <h3>Data Privacy Compliance</h3>
        <p>The tracker is designed to be privacy-compliant:</p>
        <ul>
            <li>No personally identifiable information is collected by default</li>
            <li>Session data is stored locally and can be cleared by users</li>
            <li>Complies with GDPR and other privacy regulations</li>
            <li>Users can opt-out by clearing their browser data</li>
        </ul>
    </div>

    <script>
        // Example of how the tracker works on this page
        if (typeof window.iPickTracker !== 'undefined') {
            console.log('iPick Tracker is loaded and ready!');
        }
    </script>
</body>
</html>
