{
  "meta": {
    "project": "Price Comparison Application",
    "version": "1.1.0",
    "date": "2025-07-19",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "A comprehensive web application enabling users to scrape product information from URLs and obtain price comparisons across multiple retailers, leveraging AI and automation technologies.",
  "core_goals": [
    "Enable users to extract detailed product information from arbitrary product URLs.",
    "Provide price comparison functionality using Google Shopping and other retailers.",
    "Automate product data processing via n8n webhook integration to enhance accuracy and efficiency.",
    "Ensure secure JWT-based user authentication with role-based access controls.",
    "Track and manage users' search history for personalized experiences.",
    "Support multi-country localization for product data and pricing.",
    "Maintain system health with monitoring and alerting mechanisms.",
    "Implement AI-powered cleaning of product titles for improved search relevancy."
  ],
  "key_features": [
    "JWT-based User Authentication with registration, login, logout, and current user info endpoints.",
    "Product Scraping via Puppeteer and n8n automated workflows.",
    "Price Comparison integrating Google Shopping SearchAPI and fallback mechanisms.",
    "AI-powered title cleaning using Gemini API.",
    "User Search History Management with add and retrieve functions.",
    "Geolocation detection and local dealer recommendations based on user location.",
    "Admin Management administrative endpoints for user monitoring.",
    "Comprehensive system health checks including database and service validations.",
    "Support for over 50 countries with correct currency, timezone, and localization."
  ],
  "user_flow_summary": [
    "User registers or logs in to the system via JWT authentication.",
    "User inputs a product URL for scraping; system processes via Puppeteer or n8n webhook.",
    "System cleans product title using AI and queries Google Shopping SearchAPI for comparisons.",
    "Filtered search results are validated and scored with price and quality assessments.",
    "User views main product and price comparison results with smart filtering options.",
    "User search actions are stored in search history accessible through authenticated endpoints.",
    "Admin users manage system via dedicated endpoints for user data and monitoring.",
    "System performs periodic health checks and provides detailed status reports."
  ],
  "validation_criteria": [
    "Successful JWT authentication flows with proper token issuance and validation.",
    "Accurate scraping of product data with valid title, price, and images.",
    "Consistent return of price comparison results matching expected filters and relevancy.",
    "Proper storage and retrieval of user search history with security checks.",
    "Correct AI title cleaning outputs improving search match relevance.",
    "Reliable geolocation and local dealer data for supported countries.",
    "Admin-only access enforced on management endpoints.",
    "System health endpoints return accurate database and service status."
  ],
  "api_doc": {
    "openapi": "3.0.0",
    "info": {
      "title": "Price Comparison Application API",
      "version": "1.1.0"
    },
    "paths": {
      "/api/auth/register": {
        "post": {
          "summary": "Register new user",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "string"
                    },
                    "password": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "email",
                    "password"
                  ]
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "User registered successfully",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean"
                      },
                      "token": {
                        "type": "string"
                      },
                      "accessToken": {
                        "type": "string"
                      },
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer"
                          },
                          "email": {
                            "type": "string"
                          },
                          "isAdmin": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/auth/login": {
        "post": {
          "summary": "Login user",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "email": {
                      "type": "string"
                    },
                    "password": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "email",
                    "password"
                  ]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Login successful",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean"
                      },
                      "token": {
                        "type": "string"
                      },
                      "accessToken": {
                        "type": "string"
                      },
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer"
                          },
                          "email": {
                            "type": "string"
                          },
                          "isAdmin": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/auth/logout": {
        "post": {
          "summary": "Logout user",
          "responses": {
            "200": {
              "description": "Logout successful",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "success": {
                        "type": "boolean"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/auth/me": {
        "get": {
          "summary": "Get current user info",
          "responses": {
            "200": {
              "description": "User info retrieved",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "user": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer"
                          },
                          "email": {
                            "type": "string"
                          },
                          "isAdmin": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/search-history": {
        "post": {
          "summary": "Add search to history",
          "security": [
            {
              "bearerAuth": []
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "url": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "requestId": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "url",
                    "title",
                    "requestId"
                  ]
                }
              }
            }
          },
          "responses": {
            "201": {
              "description": "Search added to history"
            }
          }
        },
        "get": {
          "summary": "Get user search history",
          "security": [
            {
              "bearerAuth": []
            }
          ],
          "responses": {
            "200": {
              "description": "Search history retrieved",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "url": {
                              "type": "string"
                            },
                            "title": {
                              "type": "string"
                            },
                            "requestId": {
                              "type": "string"
                            },
                            "timestamp": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/scrape": {
        "post": {
          "summary": "Scrape product data",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "url": {
                      "type": "string"
                    },
                    "userLocation": {
                      "type": "object",
                      "properties": {
                        "country": {
                          "type": "string"
                        }
                      }
                    }
                  },
                  "required": [
                    "url"
                  ]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Product data scraped",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "product": {
                        "type": "object",
                        "properties": {
                          "title": {
                            "type": "string"
                          },
                          "price": {
                            "type": "number"
                          },
                          "currency": {
                            "type": "string"
                          },
                          "url": {
                            "type": "string"
                          },
                          "image": {
                            "type": "string"
                          },
                          "store": {
                            "type": "string"
                          }
                        }
                      },
                      "comparisons": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "title": {
                              "type": "string"
                            },
                            "store": {
                              "type": "string"
                            },
                            "price": {
                              "type": "number"
                            },
                            "currency": {
                              "type": "string"
                            },
                            "url": {
                              "type": "string"
                            },
                            "image": {
                              "type": "string"
                            },
                            "condition": {
                              "type": "string"
                            },
                            "assessment": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "requestId": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "/api/n8n-scrape": {
          "post": {
            "summary": "N8N webhook scraping",
            "requestBody": {
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "url": {
                        "type": "string"
                      },
                      "requestId": {
                        "type": "string"
                      },
                      "userLocation": {
                        "type": "object",
                        "properties": {
                          "country": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "required": [
                      "url"
                    ]
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "N8N scraping results",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "mainProduct": {
                          "type": "object",
                          "properties": {
                            "title": {
                              "type": "string"
                            },
                            "price": {
                              "type": "string"
                            },
                            "image": {
                              "type": "string"
                            },
                            "url": {
                              "type": "string"
                            }
                          }
                        },
                        "suggestions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "title": {
                                "type": "string"
                              },
                              "standardPrice": {
                                "type": "string"
                              },
                              "discountPrice": {
                                "type": "string"
                              },
                              "site": {
                                "type": "string"
                              },
                              "link": {
                                "type": "string"
                              },
                              "image": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "/api/location": {
            "get": {
              "summary": "Get user location and local dealers",
              "responses": {
                "200": {
                  "description": "Location data retrieved",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "location": {
                            "type": "object",
                            "properties": {
                              "country": {
                                "type": "string"
                              },
                              "countryCode": {
                                "type": "string"
                              },
                              "region": {
                                "type": "string"
                              },
                              "city": {
                                "type": "string"
                              },
                              "currency": {
                                "type": "string"
                              },
                              "timeZone": {
                                "type": "string"
                              }
                            }
                          },
                          "localDealers": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string"
                                },
                                "url": {
                                  "type": "string"
                                },
                                "country": {
                                  "type": "string"
                                },
                                "region": {
                                  "type": "string"
                                },
                                "searchUrlPattern": {
                                  "type": "string"
                                },
                                "currency": {
                                  "type": "string"
                                },
                                "priority": {
                                  "type": "integer"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/admin/users": {
              "get": {
                "summary": "Get all users (admin only)",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Users list retrieved",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "users": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "integer"
                                  },
                                  "email": {
                                    "type": "string"
                                  },
                                  "isAdmin": {
                                    "type": "boolean"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "searchCount": {
                                    "type": "integer"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/health": {
              "get": {
                "summary": "System health check",
                "responses": {
                  "200": {
                    "description": "Health status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            },
                            "message": {
                              "type": "string"
                            },
                            "database": {
                              "type": "object",
                              "properties": {
                                "status": {
                                  "type": "string"
                                },
                                "message": {
                                  "type": "string"
                                }
                              }
                            },
                            "stats": {
                              "type": "object",
                              "properties": {
                                "users": {
                                  "type": "integer"
                                },
                                "searches": {
                                  "type": "integer"
                                },
                                "legacySearches": {
                                  "type": "integer"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "/api/ping": {
                "get": {
                  "summary": "Simple ping endpoint",
                  "responses": {
                    "200": {
                      "description": "Pong response",
                      "content": {
                        "application/json": {
                          "schema": {
                            "type": "object",
                            "properties": {
                              "message": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "components": {
            "securitySchemes": {
              "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
              }
            }
          }
        }
      }
    }
  },
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Node.js",
      "Express.js",
      "PostgreSQL",
      "Prisma ORM",
      "React",
      "Vite",
      "Tailwind CSS",
      "JWT Authentication",
      "Puppeteer",
      "N8N Webhooks",
      "Gemini AI API",
      "SearchAPI"
    ],
    "features": [
      {
        "name": "User Authentication",
        "description": "Complete JWT-based authentication system with user registration, login, logout, and current user info",
        "files": [
          "server/routes/auth.ts",
          "server/middleware/auth.ts",
          "server/services/database.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Authentication API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/auth/register": {
              "post": {
                "summary": "Register new user",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "email",
                          "password"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "201": {
                    "description": "User registered successfully",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "token": {
                              "type": "string"
                            },
                            "accessToken": {
                              "type": "string"
                            },
                            "user": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer"
                                },
                                "email": {
                                  "type": "string"
                                },
                                "isAdmin": {
                                  "type": "boolean"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/auth/login": {
              "post": {
                "summary": "Login user",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "email",
                          "password"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Login successful",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "token": {
                              "type": "string"
                            },
                            "accessToken": {
                              "type": "string"
                            },
                            "user": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer"
                                },
                                "email": {
                                  "type": "string"
                                },
                                "isAdmin": {
                                  "type": "boolean"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/auth/logout": {
              "post": {
                "summary": "Logout user",
                "responses": {
                  "200": {
                    "description": "Logout successful",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/auth/me": {
              "get": {
                "summary": "Get current user info",
                "responses": {
                  "200": {
                    "description": "User info retrieved",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "user": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer"
                                },
                                "email": {
                                  "type": "string"
                                },
                                "isAdmin": {
                                  "type": "boolean"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Search History Management",
        "description": "User search history tracking with add, retrieve, and management capabilities",
        "files": [
          "server/routes/auth.ts",
          "server/services/database.ts",
          "prisma/schema.prisma"
        ],
        "api_doc": {
          "paths": {
            "/api/search-history": {
              "post": {
                "summary": "Add search to history",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string"
                          },
                          "title": {
                            "type": "string"
                          },
                          "requestId": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "url",
                          "title",
                          "requestId"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "201": {
                    "description": "Search added to history"
                  }
                }
              },
              "get": {
                "summary": "Get user search history",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Search history retrieved",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "history": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "url": {
                                    "type": "string"
                                  },
                                  "title": {
                                    "type": "string"
                                  },
                                  "requestId": {
                                    "type": "string"
                                  },
                                  "timestamp": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Product Scraping",
        "description": "Advanced product scraping with N8N webhook integration and AI-powered validation",
        "files": [
          "server/routes/n8n-scrape.ts",
          "server/index.ts",
          "shared/api.ts"
        ],
        "api_doc": {
          "paths": {
            "/api/scrape": {
              "post": {
                "summary": "Scrape product data",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string"
                          },
                          "userLocation": {
                            "type": "object",
                            "properties": {
                              "country": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "required": [
                          "url"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Product data scraped",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "product": {
                              "type": "object",
                              "properties": {
                                "title": {
                                  "type": "string"
                                },
                                "price": {
                                  "type": "number"
                                },
                                "currency": {
                                  "type": "string"
                                },
                                "url": {
                                  "type": "string"
                                },
                                "image": {
                                  "type": "string"
                                },
                                "store": {
                                  "type": "string"
                                }
                              }
                            },
                            "comparisons": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "title": {
                                    "type": "string"
                                  },
                                  "store": {
                                    "type": "string"
                                  },
                                  "price": {
                                    "type": "number"
                                  },
                                  "currency": {
                                    "type": "string"
                                  },
                                  "url": {
                                    "type": "string"
                                  },
                                  "image": {
                                    "type": "string"
                                  },
                                  "condition": {
                                    "type": "string"
                                  },
                                  "assessment": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "requestId": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/n8n-scrape": {
              "post": {
                "summary": "N8N webhook scraping",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string"
                          },
                          "requestId": {
                            "type": "string"
                          },
                          "userLocation": {
                            "type": "object",
                            "properties": {
                              "country": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "required": [
                          "url"
                        ]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "N8N scraping results",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "mainProduct": {
                              "type": "object",
                              "properties": {
                                "title": {
                                  "type": "string"
                                },
                                "price": {
                                  "type": "string"
                                },
                                "image": {
                                  "type": "string"
                                },
                                "url": {
                                  "type": "string"
                                }
                              }
                            },
                            "suggestions": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "title": {
                                    "type": "string"
                                  },
                                  "standardPrice": {
                                    "type": "string"
                                  },
                                  "discountPrice": {
                                    "type": "string"
                                  },
                                  "site": {
                                    "type": "string"
                                  },
                                  "link": {
                                    "type": "string"
                                  },
                                  "image": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Location Services",
        "description": "Geolocation detection and local dealer recommendations",
        "files": [
          "server/services/location.ts"
        ],
        "api_doc": {
          "paths": {
            "/api/location": {
              "get": {
                "summary": "Get user location and local dealers",
                "responses": {
                  "200": {
                    "description": "Location data retrieved",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "location": {
                              "type": "object",
                              "properties": {
                                "country": {
                                  "type": "string"
                                },
                                "countryCode": {
                                  "type": "string"
                                },
                                "region": {
                                  "type": "string"
                                },
                                "city": {
                                  "type": "string"
                                },
                                "currency": {
                                  "type": "string"
                                },
                                "timeZone": {
                                  "type": "string"
                                }
                              }
                            },
                            "localDealers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "url": {
                                    "type": "string"
                                  },
                                  "country": {
                                    "type": "string"
                                  },
                                  "region": {
                                    "type": "string"
                                  },
                                  "searchUrlPattern": {
                                    "type": "string"
                                  },
                                  "currency": {
                                    "type": "string"
                                  },
                                  "priority": {
                                    "type": "integer"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Admin Management",
        "description": "Admin-only user management and system administration",
        "files": [
          "server/routes/auth.ts",
          "server/middleware/auth.ts"
        ],
        "api_doc": {
          "paths": {
            "/api/admin/users": {
              "get": {
                "summary": "Get all users (admin only)",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Users list retrieved",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "users": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "integer"
                                  },
                                  "email": {
                                    "type": "string"
                                  },
                                  "isAdmin": {
                                    "type": "boolean"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "searchCount": {
                                    "type": "integer"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Health Check",
        "description": "System health monitoring and database connectivity checks",
        "files": [
          "server/routes/health.ts",
          "server/services/database.ts"
        ],
        "api_doc": {
          "paths": {
            "/api/health": {
              "get": {
                "summary": "System health check",
                "responses": {
                  "200": {
                    "description": "Health status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            },
                            "message": {
                              "type": "string"
                            },
                            "database": {
                              "type": "object",
                              "properties": {
                                "status": {
                                  "type": "string"
                                },
                                "message": {
                                  "type": "string"
                                }
                              }
                            },
                            "stats": {
                              "type": "object",
                              "properties": {
                                "users": {
                                  "type": "integer"
                                },
                                "searches": {
                                  "type": "integer"
                                },
                                "legacySearches": {
                                  "type": "integer"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/ping": {
              "get": {
                "summary": "Simple ping endpoint",
                "responses": {
                  "200": {
                    "description": "Pong response",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "message": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
