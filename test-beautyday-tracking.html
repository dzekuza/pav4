<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beautyday.lt - Test Product</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .product-container {
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .product-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .product-price {
            font-size: 20px;
            color: #e44d26;
            margin-bottom: 20px;
        }
        .add-to-cart-btn {
            background: #007cba;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .cart-link {
            background: #28a745;
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 10px;
        }
        .console-output {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>Beautyday.lt - Test Environment</h1>
    
    <div class="product-container">
        <div class="product-title">Test Beauty Product</div>
        <div class="product-price">â‚¬29.99</div>
        <button class="add-to-cart-btn" name="add">Add to Cart</button>
        <br>
        <a href="/cart" class="cart-link">View Cart</a>
    </div>

    <div class="console-output" id="console-output">
        <div>Console output will appear here...</div>
    </div>

    <!-- iPick Tracking Script -->
    <script src="https://ipick.io/ipick-tracking.js" async></script>
    
    <script>
        // Override console.log to display in the page
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsole(message, type = 'log') {
            const div = document.createElement('div');
            div.style.color = type === 'error' ? 'red' : type === 'warn' ? 'orange' : 'black';
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '));
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        // Simulate Shopify global variables
        window.Shopify = {
            theme: {
                product: {
                    id: 'test-product-123',
                    title: 'Test Beauty Product',
                    price: '29.99'
                },
                cart: {
                    total_price: '29.99',
                    item_count: 1
                }
            },
            currency: {
                active: 'EUR'
            }
        };
        
        // Add some test buttons
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸš€ Test page loaded - iPick tracking should initialize');
            
            // Add test buttons
            const testContainer = document.createElement('div');
            testContainer.innerHTML = `
                <h3>Test Controls:</h3>
                <button onclick="testPageView()">Test Page View</button>
                <button onclick="testAddToCart()">Test Add to Cart</button>
                <button onclick="testCheckout()">Test Checkout</button>
                <button onclick="clearConsole()">Clear Console</button>
            `;
            document.body.insertBefore(testContainer, consoleOutput);
        });
        
        function testPageView() {
            console.log('ðŸ§ª Manual test: Page view event');
            if (window.sendEvent) {
                window.sendEvent('page_view', {
                    pageType: 'product',
                    productTitle: 'Test Beauty Product',
                    productPrice: '29.99',
                    currency: 'EUR'
                });
            }
        }
        
        function testAddToCart() {
            console.log('ðŸ§ª Manual test: Add to cart event');
            if (window.sendEvent) {
                window.sendEvent('add_to_cart', {
                    productTitle: 'Test Beauty Product',
                    productPrice: '29.99',
                    currency: 'EUR'
                });
            }
        }
        
        function testCheckout() {
            console.log('ðŸ§ª Manual test: Checkout event');
            if (window.sendEvent) {
                window.sendEvent('checkout', {
                    cartTotal: '29.99',
                    cartItemCount: 1,
                    currency: 'EUR'
                });
            }
        }
        
        function clearConsole() {
            consoleOutput.innerHTML = '<div>Console cleared...</div>';
        }
    </script>
</body>
</html>
