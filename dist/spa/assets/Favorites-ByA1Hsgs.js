import{j as e,H as m,d as g,E as u,f as N}from"./vendor_ui-DPKP3YLX.js";import{C as r,d as i}from"./card-C3AOPTFZ.js";import{B as a}from"./button-BVbCSO_a.js";import{u as v,S as l}from"./SearchHeader-BQRgaaLe.js";import{u as y,b}from"./index-Bm7-4qCY.js";import{u as f,A as w}from"./AuthModal-DdX3VqK_.js";import"./vendor_react-Bpl_dUPQ.js";import"./vendor_router-0FUT4RNd.js";import"./index-DjoQLnK1.js";import"./index-BLqSjk83.js";import"./index-fqsw_NIb.js";import"./dialog-C3oruSML.js";import"./AuthForms-Bj6aRA0D.js";import"./input--XZmn13O.js";import"./label-09uxue2U.js";import"./tabs-DMdJGpTX.js";import"./alert-CdpANgE4.js";const I=()=>{const{favorites:t,loading:x,error:c,removeFavorite:h}=v(),{toast:o}=y(),{isAuthenticated:p}=b(),{modalProps:d}=f({title:"Sign in to view favorites",description:"Create an account or sign in to view your saved favorites",defaultTab:"login"}),j=async(s,n)=>{try{await h(s),o({title:"Removed from favorites",description:`${n} has been removed from your favorites`})}catch{o({title:"Error",description:"Failed to remove from favorites",variant:"destructive"})}};return p?x?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(l,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading favorites..."})]})})]}):c?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(l,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading favorites: ",c]}),e.jsx(a,{onClick:()=>window.location.reload(),children:"Try Again"})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(l,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Favorites"}),e.jsx("p",{className:"text-gray-600",children:t.length===0?"You haven't saved any favorites yet.":`You have ${t.length} saved favorite${t.length===1?"":"s"}.`})]}),t.length===0?e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Start searching for products and add them to your favorites to see them here."}),e.jsx(a,{onClick:()=>window.location.href="/",children:"Start Searching"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(s=>e.jsx(r,{className:"hover:shadow-lg transition-shadow",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image||"/placeholder.svg",alt:s.title,className:"w-16 h-16 object-cover rounded border",onError:n=>{n.currentTarget.src="/placeholder.svg"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-blue-600 mb-1 capitalize",children:s.merchant||s.store||"Unknown Store"}),e.jsx("h4",{className:"font-medium text-sm line-clamp-2 mb-2",children:s.title}),s.price&&e.jsx("p",{className:"text-lg font-bold text-gray-700",children:s.price}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-2",children:[s.stock&&e.jsxs("span",{className:`flex items-center gap-1 ${s.stock.toLowerCase().includes("in stock")?"text-green-600":"text-orange-600"}`,children:[s.stock.toLowerCase().includes("in stock")?"✅":"⚠️",s.stock]}),s.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"h-3 w-3 fill-current text-yellow-400"}),e.jsx("span",{children:s.rating}),s.reviewsCount&&e.jsxs("span",{className:"text-xs",children:["(",s.reviewsCount,")"]})]}),s.deliveryPrice&&e.jsxs("span",{className:"text-xs",children:["🚚 ",s.deliveryPrice]})]}),s.details&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1",children:s.details}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Saved on ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[s.url&&e.jsx(a,{asChild:!0,size:"sm",variant:"outline",className:"flex-shrink-0",children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",title:"View product details","aria-label":"View product details",children:[e.jsx(u,{className:"h-3 w-3"}),e.jsx("span",{className:"sr-only",children:"View product details"})]})}),e.jsx(a,{size:"sm",variant:"ghost",className:"flex-shrink-0 p-1 h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>j(s.id,s.title),title:"Remove from favorites",children:e.jsx(N,{className:"h-4 w-4"})})]})]})})},s.id))})]})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(l,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign in to view favorites"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create an account or sign in to view your saved favorites."}),e.jsx(a,{onClick:()=>d.onClose(),children:"Sign In"})]})}),e.jsx(w,{...d})]})]})};export{I as default};
