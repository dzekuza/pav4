import{r as n}from"./vendor_react-Bpl_dUPQ.js";import{n as H,s as V,P,h as p,e as z,m as q,i as J}from"./index-C2INySnl.js";import{u as Q}from"./index-D8EubtY5.js";import{j as d}from"./vendor_ui-6VDHAWyR.js";var W=n.createContext(void 0);function X(e){const t=n.useContext(W);return e||t||"ltr"}var A="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[_,G,$]=V(b),[ee,me]=H(b,[$]),[te,oe]=ee(b),N=n.forwardRef((e,t)=>d.jsx(_.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(_.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(re,{...e,ref:t})})}));N.displayName=b;var re=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:c,orientation:o,loop:F=!1,dir:g,currentTabStopId:R,defaultCurrentTabStopId:C,onCurrentTabStopIdChange:m,onEntryFocus:a,preventScrollOnEntryFocus:E=!1,...w}=e,v=n.useRef(null),I=z(t,v),r=X(g),[l=null,T]=q({prop:R,defaultProp:C,onChange:m}),[u,i]=n.useState(!1),x=J(a),M=G(c),S=n.useRef(!1),[k,y]=n.useState(0);return n.useEffect(()=>{const s=v.current;if(s)return s.addEventListener(A,x),()=>s.removeEventListener(A,x)},[x]),d.jsx(te,{scope:c,orientation:o,dir:r,loop:F,currentTabStopId:l,onItemFocus:n.useCallback(s=>T(s),[T]),onItemShiftTab:n.useCallback(()=>i(!0),[]),onFocusableItemAdd:n.useCallback(()=>y(s=>s+1),[]),onFocusableItemRemove:n.useCallback(()=>y(s=>s-1),[]),children:d.jsx(P.div,{tabIndex:u||k===0?-1:0,"data-orientation":o,...w,ref:I,style:{outline:"none",...e.style},onMouseDown:p(e.onMouseDown,()=>{S.current=!0}),onFocus:p(e.onFocus,s=>{const L=!S.current;if(s.target===s.currentTarget&&L&&!u){const D=new CustomEvent(A,Z);if(s.currentTarget.dispatchEvent(D),!D.defaultPrevented){const h=M().filter(f=>f.focusable),U=h.find(f=>f.active),B=h.find(f=>f.id===l),Y=[U,B,...h].filter(Boolean).map(f=>f.ref.current);j(Y,E)}}S.current=!1}),onBlur:p(e.onBlur,()=>i(!1))})})}),O="RovingFocusGroupItem",K=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:c,focusable:o=!0,active:F=!1,tabStopId:g,...R}=e,C=Q(),m=g||C,a=oe(O,c),E=a.currentTabStopId===m,w=G(c),{onFocusableItemAdd:v,onFocusableItemRemove:I}=a;return n.useEffect(()=>{if(o)return v(),()=>I()},[o,v,I]),d.jsx(_.ItemSlot,{scope:c,id:m,focusable:o,active:F,children:d.jsx(P.span,{tabIndex:E?0:-1,"data-orientation":a.orientation,...R,ref:t,onMouseDown:p(e.onMouseDown,r=>{o?a.onItemFocus(m):r.preventDefault()}),onFocus:p(e.onFocus,()=>a.onItemFocus(m)),onKeyDown:p(e.onKeyDown,r=>{if(r.key==="Tab"&&r.shiftKey){a.onItemShiftTab();return}if(r.target!==r.currentTarget)return;const l=ce(r,a.orientation,a.dir);if(l!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||r.shiftKey)return;r.preventDefault();let u=w().filter(i=>i.focusable).map(i=>i.ref.current);if(l==="last")u.reverse();else if(l==="prev"||l==="next"){l==="prev"&&u.reverse();const i=u.indexOf(r.currentTarget);u=a.loop?ae(u,i+1):u.slice(i+1)}setTimeout(()=>j(u))}})})})});K.displayName=O;var ne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function se(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ce(e,t,c){const o=se(e.key,c);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ne[o]}function j(e,t=!1){const c=document.activeElement;for(const o of e)if(o===c||(o.focus({preventScroll:t}),document.activeElement!==c))return}function ae(e,t){return e.map((c,o)=>e[(t+o)%e.length])}var pe=N,ve=K;export{ve as I,pe as R,me as c,X as u};
