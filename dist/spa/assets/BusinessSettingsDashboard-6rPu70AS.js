import{j as e,N as F,O as x,G as P,V as E,S as A,u as B,v as R}from"./vendor_ui-DPKP3YLX.js";import{r as C}from"./vendor_react-Bpl_dUPQ.js";import{C as g,a as j,b as p,c as f,d as y}from"./card-BoaCPfwL.js";import{B as o}from"./button-BcPegbQV.js";import{I as n}from"./input-BtdDvZdB.js";import{L as i}from"./label-OHnDB7wq.js";import{S as l}from"./switch-BLe1yzVi.js";import{S as b}from"./separator-DVK0LTLX.js";import{T as D,a as O,b as N,c as v}from"./tabs-BvOWKuGM.js";import{u as L}from"./index-D26ovBZe.js";import{d as U}from"./vendor_router-0FUT4RNd.js";import"./index-8D4BTpIL.js";import"./index-BzUvSZV7.js";function X(){const{stats:c}=U(),{toast:w}=L(),[a,I]=C.useState({businessInfo:{name:(c==null?void 0:c.name)||"",domain:(c==null?void 0:c.domain)||"",email:"business@example.com",phone:"+1 (555) 123-4567",address:"123 Business St, City, State 12345",country:"United States",category:"E-commerce",description:"Your business description here"},trackingSettings:{enableTracking:!0,enableNotifications:!0,enableAnalytics:!0,trackingCode:"YOUR_TRACKING_CODE"},commissionSettings:{commissionRate:(c==null?void 0:c.adminCommissionRate)||10,autoPayout:!1,payoutThreshold:100},securitySettings:{twoFactorAuth:!1,sessionTimeout:30,ipWhitelist:[]}}),[d,k]=C.useState(!1),[m,T]=C.useState(!1),h=async s=>{k(!0);try{if(s==="Profile"){const r=await fetch("/api/business/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:a.businessInfo.name,domain:a.businessInfo.domain,email:a.businessInfo.email,phone:a.businessInfo.phone,address:a.businessInfo.address,country:a.businessInfo.country,category:a.businessInfo.category,description:a.businessInfo.description})});if(!r.ok){const u=await r.json();throw new Error(u.error||"Failed to save profile settings")}const S=await r.json();w({title:"Profile Updated",description:S.message||"Business profile has been updated successfully."})}else await new Promise(r=>setTimeout(r,1e3)),w({title:"Settings Saved",description:`${s} settings have been updated successfully.`})}catch(r){console.error("Error saving settings:",r),w({title:"Error",description:r instanceof Error?r.message:"Failed to save settings. Please try again.",variant:"destructive"})}finally{k(!1)}},t=(s,r,S)=>{I(u=>({...u,[s]:{...u[s],[r]:S}}))};return e.jsxs("div",{className:"space-y-6 text-white",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Business Settings"}),e.jsx("p",{className:"text-white/70",children:"Manage your business profile, tracking, and security settings"})]})}),e.jsxs(D,{defaultValue:"profile",className:"space-y-4",children:[e.jsxs(O,{className:"grid w-full grid-cols-4",children:[e.jsx(N,{value:"profile",children:"Profile"}),e.jsx(N,{value:"tracking",children:"Tracking"}),e.jsx(N,{value:"commission",children:"Commission"}),e.jsx(N,{value:"security",children:"Security"})]}),e.jsx(v,{value:"profile",className:"space-y-4",children:e.jsxs(g,{className:"border-white/10 bg-white/5 text-white",children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-white",children:[e.jsx(F,{className:"h-5 w-5"}),"Business Information"]}),e.jsx(f,{className:"text-white/80",children:"Update your business profile and contact information"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"business-name",children:"Business Name"}),e.jsx(n,{id:"business-name",value:a.businessInfo.name,onChange:s=>t("businessInfo","name",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"domain",children:"Domain"}),e.jsx(n,{id:"domain",value:a.businessInfo.domain,onChange:s=>t("businessInfo","domain",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:a.businessInfo.email,onChange:s=>t("businessInfo","email",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"phone",children:"Phone"}),e.jsx(n,{id:"phone",value:a.businessInfo.phone,onChange:s=>t("businessInfo","phone",s.target.value)})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(i,{htmlFor:"address",children:"Address"}),e.jsx(n,{id:"address",value:a.businessInfo.address,onChange:s=>t("businessInfo","address",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"country",children:"Country"}),e.jsx(n,{id:"country",value:a.businessInfo.country,onChange:s=>t("businessInfo","country",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"category",children:"Category"}),e.jsx(n,{id:"category",value:a.businessInfo.category,onChange:s=>t("businessInfo","category",s.target.value)})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",className:"w-full min-h-[140px] px-3 py-2 rounded-md border border-white/10 bg-white/5 text-white placeholder:text-white/60 backdrop-blur-sm focus-visible:outline-none focus-visible:ring-0",value:a.businessInfo.description,onChange:s=>t("businessInfo","description",s.target.value)})]})]}),e.jsxs(o,{onClick:()=>h("Profile"),disabled:d,className:"w-full md:w-auto",children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Save Profile Settings"]})]})]})}),e.jsx(v,{value:"tracking",className:"space-y-4",children:e.jsxs(g,{className:"border-white/10 bg-white/5 text-white",children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-white",children:[e.jsx(P,{className:"h-5 w-5"}),"Tracking Configuration"]}),e.jsx(f,{className:"text-white/80",children:"Configure your tracking and analytics settings"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Tracking"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track user activity and conversions"})]}),e.jsx(l,{checked:a.trackingSettings.enableTracking,onCheckedChange:s=>t("trackingSettings","enableTracking",s)})]}),e.jsx(b,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive alerts for new conversions"})]}),e.jsx(l,{checked:a.trackingSettings.enableNotifications,onCheckedChange:s=>t("trackingSettings","enableNotifications",s)})]}),e.jsx(b,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed analytics and reporting"})]}),e.jsx(l,{checked:a.trackingSettings.enableAnalytics,onCheckedChange:s=>t("trackingSettings","enableAnalytics",s)})]})]}),e.jsxs(o,{onClick:()=>h("Tracking"),disabled:d,className:"w-full md:w-auto",children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Save Tracking Settings"]})]})]})}),e.jsx(v,{value:"commission",className:"space-y-4",children:e.jsxs(g,{className:"border-white/10 bg-white/5 text-white",children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-white",children:[e.jsx(E,{className:"h-5 w-5"}),"Commission Settings"]}),e.jsx(f,{className:"text-white/80",children:"Configure your commission rates and payout preferences"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"commission-rate",children:"Commission Rate (%)"}),e.jsx(n,{id:"commission-rate",type:"number",min:"0",max:"100",value:a.commissionSettings.commissionRate,onChange:s=>t("commissionSettings","commissionRate",parseFloat(s.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"payout-threshold",children:"Payout Threshold ($)"}),e.jsx(n,{id:"payout-threshold",type:"number",min:"0",value:a.commissionSettings.payoutThreshold,onChange:s=>t("commissionSettings","payoutThreshold",parseFloat(s.target.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Auto Payout"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically payout when threshold is reached"})]}),e.jsx(l,{checked:a.commissionSettings.autoPayout,onCheckedChange:s=>t("commissionSettings","autoPayout",s)})]}),e.jsxs(o,{onClick:()=>h("Commission"),disabled:d,className:"w-full md:w-auto",children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Save Commission Settings"]})]})]})}),e.jsx(v,{value:"security",className:"space-y-4",children:e.jsxs(g,{className:"border-white/10 bg-white/5 text-white",children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-white",children:[e.jsx(A,{className:"h-5 w-5"}),"Security Settings"]}),e.jsx(f,{className:"text-white/80",children:"Manage your account security and access controls"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security"})]}),e.jsx(l,{checked:a.securitySettings.twoFactorAuth,onCheckedChange:s=>t("securitySettings","twoFactorAuth",s)})]}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"session-timeout",children:"Session Timeout (minutes)"}),e.jsx(n,{id:"session-timeout",type:"number",min:"5",max:"480",value:a.securitySettings.sessionTimeout,onChange:s=>t("securitySettings","sessionTimeout",parseInt(s.target.value))})]}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Change Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:m?"text":"password",placeholder:"Current password"}),e.jsx(n,{type:m?"text":"password",placeholder:"New password"}),e.jsx(o,{variant:"outline",size:"icon",onClick:()=>T(!m),children:m?e.jsx(B,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})})]})]})]}),e.jsxs(o,{onClick:()=>h("Security"),disabled:d,className:"w-full md:w-auto",children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Save Security Settings"]})]})]})})]})]})}export{X as default};
