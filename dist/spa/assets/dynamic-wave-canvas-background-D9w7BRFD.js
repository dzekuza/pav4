import{j as k}from"./vendor_ui-DPKP3YLX.js";import{r as B}from"./vendor_react-Bpl_dUPQ.js";const Y=({fps:E=30,quality:I="medium"})=>{const b=B.useRef(null);return B.useEffect(()=>{var D;const n=b.current;if(!n)return;const o=n.getContext("2d");if(!o)return;let i,a,v,r,s=I==="low"?4:I==="high"?2:3;const x=Math.min(1.75,window.devicePixelRatio||1);x>1.25&&(s=Math.max(s,3));const y=()=>{n.width=Math.floor(window.innerWidth*x),n.height=Math.floor(window.innerHeight*x),i=Math.floor(n.width/s),a=Math.floor(n.height/s),v=o.createImageData(i,a),r=v.data};let m=0;const R=()=>{m||(m=requestAnimationFrame(()=>{y(),m=0}))};window.addEventListener("resize",R),y();const H=Date.now(),L=new Float32Array(1024),P=new Float32Array(1024);for(let t=0;t<1024;t++){const e=t/1024*Math.PI*2;L[t]=Math.sin(e),P[t]=Math.cos(e)}const A=t=>{const e=Math.floor(t%(Math.PI*2)/(Math.PI*2)*1024)&1023;return L[e]},h=t=>{const e=Math.floor(t%(Math.PI*2)/(Math.PI*2)*1024)&1023;return P[e]},N=((D=window.matchMedia)==null?void 0:D.call(window,"(prefers-reduced-motion: reduce)").matches)??!1?Math.min(15,E):E,Q=1e3/Math.max(10,Math.min(60,N));let S=0,z=!0,c=0;const C=()=>{z=document.visibilityState==="visible"};document.addEventListener("visibilitychange",C);const d=()=>{if(!z){c=requestAnimationFrame(d);return}const t=performance.now();if(t-S<Q){c=requestAnimationFrame(d);return}S=t;const e=(Date.now()-H)*.001;for(let u=0;u<a;u++)for(let f=0;f<i;f++){const q=(2*f-i)/a,T=(2*u-a)/a;let l=0,w=0;for(let g=0;g<4;g++)l+=h(g-w+e*.5-l*q),w+=A(g*T+l);const p=.3+.4*((A(l)+h(w))*.5),F=.1+.15*h(q+T+e*.3),_=.2*A(l*1.5+e*.2),j=.15*h(w*2+e*.1),V=Math.max(0,Math.min(1,F+j*.8))*p,W=Math.max(0,Math.min(1,F+_*.6))*p,O=Math.max(0,Math.min(1,F+_*1.2+j*.4))*p,M=(u*i+f)*4;r[M]=V*255,r[M+1]=W*255,r[M+2]=O*255,r[M+3]=255}o.putImageData(v,0,0),s>1&&(o.imageSmoothingEnabled=!1,o.drawImage(n,0,0,i,a,0,0,n.width,n.height)),c=requestAnimationFrame(d)};return c=requestAnimationFrame(d),()=>{window.removeEventListener("resize",R),document.removeEventListener("visibilitychange",C),cancelAnimationFrame(m),cancelAnimationFrame(c)}},[]),k.jsx("canvas",{ref:b,className:"absolute inset-0 w-full h-full"})};export{Y as default};
