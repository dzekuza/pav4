import{j as e,M as A,S as B,G as R,b as k,C as I,c as Z,d as D,T as M,Z as G}from"./vendor_ui-DPKP3YLX.js";import{r as a}from"./vendor_react-Bpl_dUPQ.js";import{C as P,a as F,b as H,c as W,d as U}from"./card-CUmbL-D9.js";import{S as O}from"./SearchInput-BPceslJ2.js";import{B as b}from"./button-DP2dp-PV.js";import{B as z}from"./badge-Cx_qSRgY.js";import{S as $}from"./LoadingSkeleton-ByZzNo0-.js";import{S as K}from"./SearchHeader-BXp9_NKE.js";import{a as V}from"./vendor_router-0FUT4RNd.js";import"./index-ZVa9_c7w.js";import"./input-Bt03Fmew.js";import"./index-B6HsZdxu.js";import"./dialog-CLJAIzey.js";import"./index-DxE6KrYo.js";import"./dynamic-wave-canvas-background-D9w7BRFD.js";import"./index-BrMgMA-w.js";function Y({onLocationDetected:j,onSkip:p}){const[l,n]=a.useState("idle"),[N,c]=a.useState(null),[u,g]=a.useState(null),[h,d]=a.useState([]),[f,S]=a.useState(!0),[w,s]=a.useState("");a.useEffect(()=>{o()},[]);const o=async()=>{try{const t=await fetch("/api/supported-countries");if(t.ok){const y=await t.json();d(y.countries)}else d([{country:"United States",countryCode:"US",region:"North America",currency:"$",timeZone:"America/New_York"},{country:"Germany",countryCode:"DE",region:"Western Europe",currency:"€",timeZone:"Europe/Berlin"},{country:"United Kingdom",countryCode:"GB",region:"Western Europe",currency:"£",timeZone:"Europe/London"},{country:"France",countryCode:"FR",region:"Western Europe",currency:"€",timeZone:"Europe/Paris"},{country:"Spain",countryCode:"ES",region:"Western Europe",currency:"€",timeZone:"Europe/Madrid"},{country:"Italy",countryCode:"IT",region:"Western Europe",currency:"€",timeZone:"Europe/Rome"},{country:"Lithuania",countryCode:"LT",region:"Baltic",currency:"€",timeZone:"Europe/Vilnius"},{country:"Latvia",countryCode:"LV",region:"Baltic",currency:"€",timeZone:"Europe/Riga"},{country:"Estonia",countryCode:"EE",region:"Baltic",currency:"€",timeZone:"Europe/Tallinn"}])}catch(t){console.error("Failed to fetch supported countries:",t),d([{country:"United States",countryCode:"US",region:"North America",currency:"$",timeZone:"America/New_York"},{country:"Germany",countryCode:"DE",region:"Western Europe",currency:"€",timeZone:"Europe/Berlin"},{country:"United Kingdom",countryCode:"GB",region:"Western Europe",currency:"£",timeZone:"Europe/London"},{country:"France",countryCode:"FR",region:"Western Europe",currency:"€",timeZone:"Europe/Paris"},{country:"Spain",countryCode:"ES",region:"Western Europe",currency:"€",timeZone:"Europe/Madrid"},{country:"Italy",countryCode:"IT",region:"Western Europe",currency:"€",timeZone:"Europe/Rome"},{country:"Lithuania",countryCode:"LT",region:"Baltic",currency:"€",timeZone:"Europe/Vilnius"},{country:"Latvia",countryCode:"LV",region:"Baltic",currency:"€",timeZone:"Europe/Riga"},{country:"Estonia",countryCode:"EE",region:"Baltic",currency:"€",timeZone:"Europe/Tallinn"}])}finally{S(!1)}},i=t=>({US:"🇺🇸",DE:"🇩🇪",GB:"🇬🇧",FR:"🇫🇷",ES:"🇪🇸",IT:"🇮🇹",LT:"🇱🇹",LV:"🇱🇻",EE:"🇪🇪",PL:"🇵🇱",NL:"🇳🇱",BE:"🇧🇪",AT:"🇦🇹",CH:"🇨🇭",SE:"🇸🇪",NO:"🇳🇴",DK:"🇩🇰",FI:"🇫🇮",CZ:"🇨🇿",HU:"🇭🇺",RO:"🇷🇴",BG:"🇧🇬",HR:"🇭🇷",SK:"🇸🇰",SI:"🇸🇮",IE:"🇮🇪",PT:"🇵🇹",GR:"🇬🇷",CY:"🇨🇾",MT:"🇲🇹",LU:"🇱🇺",CA:"🇨🇦",MX:"🇲🇽",JP:"🇯🇵",KR:"🇰🇷",AU:"🇦🇺",NZ:"🇳🇿",IN:"🇮🇳",SG:"🇸🇬",MY:"🇲🇾",TH:"🇹🇭",VN:"🇻🇳",PH:"🇵🇭",ID:"🇮🇩",HK:"🇭🇰",TW:"🇹🇼",BR:"🇧🇷",AR:"🇦🇷",CL:"🇨🇱",CO:"🇨🇴",PE:"🇵🇪",VE:"🇻🇪",ZA:"🇿🇦",EG:"🇪🇬",NG:"🇳🇬",KE:"🇰🇪",GH:"🇬🇭",IL:"🇮🇱",AE:"🇦🇪",SA:"🇸🇦",TR:"🇹🇷"})[t]||"🌍",m=()=>{if(n("detecting"),c(null),!navigator.geolocation){c("Geolocation is not supported by your browser"),n("error");return}navigator.geolocation.getCurrentPosition(async t=>{try{const y=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${t.coords.latitude}&longitude=${t.coords.longitude}&localityLanguage=en`);if(!y.ok)throw new Error("Failed to get location data");const L=(await y.json()).countryCode,v=h.find(E=>E.countryCode===L);if(v)g(v),n("success");else{const E=h.find(T=>T.countryCode==="US")||h[0];g(E),n("success")}}catch{c("Failed to determine your location"),n("error")}},t=>{c("Location access denied or unavailable"),n("error")},{timeout:1e4,enableHighAccuracy:!1})},r=t=>{j(t)},x=h.filter(t=>t.country.toLowerCase().includes(w.toLowerCase()));return e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(P,{className:"w-full max-w-md",children:[e.jsxs(F,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10",children:e.jsx(A,{className:"h-6 w-6 text-primary"})}),e.jsx(H,{children:"Detect Your Location"}),e.jsx(W,{children:"We'll use your location to show you the best prices and local retailers"})]}),e.jsxs(U,{className:"space-y-4",children:[l==="idle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"Your location is only used to find better prices"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{onClick:m,className:"w-full",size:"lg",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Detect My Location"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or select manually"})})]}),f?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading countries..."})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search country...",value:w,onChange:t=>s(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-md text-sm"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:x.map(t=>e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>r(t),className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:i(t.countryCode)}),t.country]},t.countryCode))})]})]})]}),l==="detecting"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Detecting your location..."})]}),l==="success"&&u&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100 dark:bg-green-900",children:e.jsx(I,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Location detected!"}),e.jsx(z,{variant:"secondary",className:"mt-2",children:u.country})]}),e.jsx(b,{onClick:()=>j(u),className:"w-full",children:"Use This Location"})]}),l==="error"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900",children:e.jsx(Z,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Location detection failed"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:N})]}),e.jsx(b,{variant:"outline",onClick:()=>n("manual"),className:"w-full",children:"Select Manually"})]}),l==="manual"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select your country to get localized results:"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search country...",value:w,onChange:t=>s(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-md text-sm"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:x.map(t=>e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>r(t),className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:i(t.countryCode)}),t.country]},t.countryCode))})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(b,{variant:"ghost",onClick:p,className:"w-full text-muted-foreground",children:"Skip for now"})})]})]})})}function _(){const[j,p]=a.useState(null),[l,n]=a.useState([]),[N,c]=a.useState(!0),[u,g]=a.useState(null),[h,d]=a.useState(!1);a.useEffect(()=>{(async()=>{try{c(!0),g(null);const o=localStorage.getItem("user_location");if(o){const r=JSON.parse(o);p(r),await f(r),c(!1);return}const i=await fetch("/api/location");if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const m=await i.json();m.location&&m.location.country!=="United States"?(p(m.location),n(m.localDealers),localStorage.setItem("user_location",JSON.stringify(m.location))):d(!0)}catch(o){console.error("Location detection failed:",o),g(o instanceof Error?o.message:"Failed to detect location"),d(!0)}finally{c(!1)}})()},[]);const f=async s=>{try{const o=await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:s})});if(o.ok){const i=await o.json();n(i.localDealers)}}catch(o){console.error("Failed to fetch local dealers:",o)}};return{location:j,localDealers:l,loading:N,error:u,showLocationPermission:h,handleLocationDetected:s=>{p(s),d(!1),localStorage.setItem("user_location",JSON.stringify(s)),f(s)},handleLocationSkip:()=>{const s={country:"United States",countryCode:"US",region:"North America",currency:"$",timeZone:"America/New_York"};p(s),d(!1),localStorage.setItem("user_location",JSON.stringify(s)),f(s)}}}function me(){const[j,p]=a.useState(""),[l,n]=a.useState(!1),[N,c]=a.useState(null),[u,g]=a.useState("de"),h=V(),{showLocationPermission:d,handleLocationDetected:f,handleLocationSkip:S}=_(),w=r=>({us:"United States",de:"Germany",uk:"United Kingdom",lt:"Lithuania",lv:"Latvia",ee:"Estonia",fr:"France",es:"Spain",it:"Italy",pl:"Poland",cz:"Czech Republic",sk:"Slovakia",hu:"Hungary",ro:"Romania",bg:"Bulgaria",hr:"Croatia",si:"Slovenia",at:"Austria",be:"Belgium",nl:"Netherlands",dk:"Denmark",se:"Sweden",no:"Norway",fi:"Finland",is:"Iceland",ie:"Ireland",pt:"Portugal",gr:"Greece",cy:"Cyprus",mt:"Malta",lu:"Luxembourg",ae:"United Arab Emirates",ai:"Anguilla",ar:"Argentina",au:"Australia",bm:"Bermuda",br:"Brazil",ca:"Canada",cl:"Chile",co:"Colombia",cr:"Costa Rica",do:"Dominican Republic",ec:"Ecuador",sv:"El Salvador",gt:"Guatemala",hn:"Honduras",mx:"Mexico",ni:"Nicaragua",pa:"Panama",py:"Paraguay",pe:"Peru",uy:"Uruguay",ve:"Venezuela"})[r]||"Germany",s=r=>{if(!r.trim()){c("Please enter a product URL or keywords");return}n(!0),c(null);const x=w(u),t=Date.now().toString(),y="product-search";let C=!1;try{const v=new URL(r.trim());C=!!v.protocol&&!!v.host}catch{C=!1}const L=`/new-search/${t}/${y}`;h(L,{state:{searchUrl:r.trim(),userCountry:x,gl:u,requestId:t,isKeywordSearch:!C}})},o=[{name:"Amazon",logo:"🛒"},{name:"eBay",logo:"🛍️"},{name:"Walmart",logo:"🏪"},{name:"Target",logo:"🎯"},{name:"Best Buy",logo:"⚡"},{name:"Costco",logo:"📦"}],i=[{icon:e.jsx(k,{className:"h-6 w-6"}),title:"Smart Product Detection",description:"AI-powered extraction of product details from any URL"},{icon:e.jsx(M,{className:"h-6 w-6"}),title:"Real-time Price Tracking",description:"Compare prices across multiple retailers instantly"},{icon:e.jsx(B,{className:"h-6 w-6"}),title:"Trusted Sources",description:"Only verified retailers and marketplace sellers"},{icon:e.jsx(G,{className:"h-6 w-6"}),title:"Lightning Fast",description:"Get results in seconds with our optimized scraping"}],m=[{product:"Sony WH-1000XM5 Headphones",savings:"$45"},{product:"iPhone 15 Pro Max",savings:"$120"},{product:"Nike Air Max 270",savings:"$30"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted",children:[e.jsx($,{isVisible:l}),d&&e.jsx(Y,{onLocationDetected:f,onSkip:S}),e.jsx(K,{showBackButton:!1}),e.jsx("section",{className:"container mx-auto px-4 py-16 md:py-24",children:e.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight mb-6",children:["Find the"," ",e.jsx("span",{className:"bg-brand-gradient bg-clip-text text-transparent",children:"best deals"})," ","on any product"]}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Paste any product URL and we'll instantly find the cheapest prices across hundreds of retailers. Save money on every purchase with AI-powered price comparison."}),e.jsxs("div",{className:"mb-12 max-w-2xl mx-auto",children:[e.jsx(O,{value:j,onChange:p,onSubmit:s,isLoading:l,selectedCountry:u,onCountryChange:g,placeholder:"Paste a product URL or enter keywords (e.g., iPhone 16 Pro Max, Amazon, etc.)"}),N&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg max-w-md mx-auto",children:e.jsx("p",{className:"text-red-700 text-sm",children:N})})]}),e.jsxs("div",{className:"mb-16 max-w-3xl mx-auto",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"We compare prices from popular stores including:"}),e.jsx("div",{className:"flex items-center justify-center gap-6 flex-wrap",children:o.map(r=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"text-lg",children:r.logo}),e.jsx("span",{children:r.name})]},r.name))})]})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Why choose PriceHunt?"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Our AI-powered platform makes price comparison effortless and accurate"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((r,x)=>e.jsx(P,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(U,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-gradient rounded-xl flex items-center justify-center mx-auto mb-4 text-white",children:r.icon}),e.jsx("h3",{className:"font-semibold mb-2",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})},x))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Recent success stories"}),e.jsx("p",{className:"text-muted-foreground",children:"See how much others have saved"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:m.map((r,x)=>e.jsx(P,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(U,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold mb-2",children:r.product}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[r.savings," saved"]})]})},x))})]})}),e.jsx("footer",{className:"border-t bg-background/80 backdrop-blur-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2024 PriceHunt. All rights reserved."})})})})]})}export{me as default};
