import{j as e,m as x,n as h,o as A,p as F}from"./vendor_ui-DPKP3YLX.js";import{r as n}from"./vendor_react-Bpl_dUPQ.js";import{B as T}from"./button-BVbCSO_a.js";import{I as o}from"./input--XZmn13O.js";import{L as c}from"./label-09uxue2U.js";import{C as L,a as q,b as E,c as D,d as I}from"./card-C3AOPTFZ.js";import{T as S,a as k,b as w,c as g}from"./tabs-DMdJGpTX.js";import{A as B,a as R}from"./alert-CdpANgE4.js";import{b as H}from"./index-Bm7-4qCY.js";function Q({onSuccess:d,defaultTab:f="login"}){const[t,j]=n.useState(f),[u,p]=n.useState(!1),[m,r]=n.useState(""),[s,v]=n.useState({email:"",password:"",confirmPassword:""}),{login:N,register:b}=H(),l=(a,i)=>{v(P=>({...P,[a]:i})),m&&r("")},y=()=>!s.email||!s.password?(r("Please fill in all required fields"),!1):s.email.includes("@")?s.password.length<6?(r("Password must be at least 6 characters long"),!1):t==="register"&&s.password!==s.confirmPassword?(r("Passwords do not match"),!1):!0:(r("Please enter a valid email address"),!1),C=async a=>{if(a.preventDefault(),!!y()){p(!0),r("");try{const i=t==="login"?await N(s.email,s.password):await b(s.email,s.password);i.success?d==null||d():r(i.error||"Authentication failed")}catch{r("An unexpected error occurred")}finally{p(!1)}}};return e.jsxs(L,{className:"w-full max-w-md mx-auto border-white/10 bg-white/5 text-white",children:[e.jsxs(q,{className:"space-y-1",children:[e.jsx(E,{className:"text-2xl text-center text-white",children:"Welcome"}),e.jsx(D,{className:"text-center text-white/80",children:t==="login"?"Sign in to your account to access your search history":"Create an account to save your search history"})]}),e.jsx(I,{children:e.jsxs(S,{value:t,onValueChange:a=>j(a),children:[e.jsxs(k,{className:"grid w-full grid-cols-2",children:[e.jsx(w,{value:"login",children:"Login"}),e.jsx(w,{value:"register",children:"Register"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4 mt-4",children:[m&&e.jsx(B,{variant:"destructive",children:e.jsx(R,{children:m})}),e.jsxs(g,{value:"login",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-3 h-4 w-4 text-white/60"}),e.jsx(o,{id:"email",type:"email",placeholder:"your@email.com",value:s.email,onChange:a=>l("email",a.target.value),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3 h-4 w-4 text-white/60"}),e.jsx(o,{id:"password",type:"password",placeholder:"Enter your password",value:s.password,onChange:a=>l("password",a.target.value),className:"pl-10",required:!0})]})]})]}),e.jsxs(g,{value:"register",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email-register",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-3 h-4 w-4 text-white/60"}),e.jsx(o,{id:"email-register",type:"email",placeholder:"your@email.com",value:s.email,onChange:a=>l("email",a.target.value),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"password-register",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3 h-4 w-4 text-white/60"}),e.jsx(o,{id:"password-register",type:"password",placeholder:"Create a password (min. 6 characters)",value:s.password,onChange:a=>l("password",a.target.value),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"confirm-password",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3 h-4 w-4 text-white/60"}),e.jsx(o,{id:"confirm-password",type:"password",placeholder:"Confirm your password",value:s.confirmPassword,onChange:a=>l("confirmPassword",a.target.value),className:"pl-10",required:!0})]})]})]}),e.jsx(T,{type:"submit",className:"w-full rounded-full bg-white text-black border border-black/10 hover:bg-white/90",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),t==="login"?"Signing in...":"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),t==="login"?"Sign In":"Create Account"]})})]})]})})]})}export{Q as A};
