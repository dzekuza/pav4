import{j as e,L as v,w,x as f,y as j,s as p,z as N}from"./vendor_ui-DPKP3YLX.js";import{r as c}from"./vendor_react-Bpl_dUPQ.js";import{B as a}from"./button-BVbCSO_a.js";import{u as k,c as o}from"./index-Bm7-4qCY.js";import{C as y,d as C}from"./card-C3AOPTFZ.js";import{S as l}from"./SearchHeader-BQRgaaLe.js";import{a as B,u as L,O as S}from"./vendor_router-0FUT4RNd.js";import"./index-DjoQLnK1.js";import"./index-BLqSjk83.js";import"./index-fqsw_NIb.js";function P(){const[n,h]=c.useState(null),[b,u]=c.useState(!0),t=B(),m=L(),{toast:d}=k();c.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await fetch("/api/business/auth/stats",{credentials:"include"});if(s.ok){const i=await s.json();console.log("BusinessDashboardLayout - Received data:",i),console.log("BusinessDashboardLayout - Stats:",i.stats),h(i.stats)}else if(s.status===401){t("/business-login");return}else d({title:"Error",description:"Failed to fetch business statistics",variant:"destructive"})}catch(s){console.error("Error fetching stats:",s),d({title:"Network Error",description:"Failed to connect to server",variant:"destructive"})}finally{u(!1)}},g=async()=>{try{await fetch("/api/business/auth/logout",{method:"POST",credentials:"include"}),t("/business-login")}catch(s){console.error("Logout error:",s)}},r=s=>m.pathname===s;return b?e.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[e.jsx("img",{src:"/pagebg.png",alt:"",className:"pointer-events-none absolute inset-0 -z-10 h-full w-full object-cover opacity-100"}),e.jsx(l,{showBackButton:!1}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((s,i)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},i))})]})})]}):n?e.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[e.jsx("img",{src:"/pagebg.png",alt:"",className:"pointer-events-none absolute inset-0 -z-10 h-full w-full object-cover opacity-100"}),e.jsx(l,{showBackButton:!1}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:n.name}),e.jsx("p",{className:"text-white/70",children:n.domain})]}),e.jsxs(a,{variant:"outline",onClick:g,className:"rounded-full bg-white text-black border border-black/10 hover:bg-white/90",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),e.jsxs("div",{className:"flex space-x-2 mb-6",children:[e.jsxs(a,{variant:"ghost",onClick:()=>t("/business/dashboard"),className:o("flex items-center rounded-full",r("/business/dashboard")?"bg-white text-black border border-black/10 hover:bg-white/90":"text-white hover:bg-white/10"),children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs(a,{variant:"ghost",onClick:()=>t("/business/dashboard/activity"),className:o("flex items-center rounded-full",r("/business/dashboard/activity")?"bg-white text-black border border-black/10 hover:bg-white/90":"text-white hover:bg-white/10"),children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Activity"]}),e.jsxs(a,{variant:"ghost",onClick:()=>t("/business/dashboard/integrate"),className:o("flex items-center rounded-full",r("/business/dashboard/integrate")?"bg-white text-black border border-black/10 hover:bg-white/90":"text-white hover:bg-white/10"),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Integrate"]}),e.jsxs(a,{variant:"ghost",onClick:()=>t("/business/dashboard/analytics"),className:o("flex items-center rounded-full",r("/business/dashboard/analytics")?"bg-white text-black border border-black/10 hover:bg-white/90":"text-white hover:bg-white/10"),children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Analytics"]}),e.jsxs(a,{variant:"ghost",onClick:()=>t("/business/dashboard/settings"),className:o("flex items-center rounded-full",r("/business/dashboard/settings")?"bg-white text-black border border-black/10 hover:bg-white/90":"text-white hover:bg-white/10"),children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Settings"]})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(S,{context:{stats:n}})})]})]}):e.jsxs("div",{className:"min-h-screen bg-background text-white",children:[e.jsx(l,{showBackButton:!1}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(y,{className:"border-white/10 bg-white/5 text-white",children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-white/80",children:"Unable to load business statistics."}),e.jsx(a,{onClick:()=>t("/business-login"),className:"mt-4 rounded-full bg-white text-black border border-black/10 hover:bg-white/90",children:"Back to Login"})]})})})]})}export{P as default};
