import{j as e}from"./vendor_ui-6VDHAWyR.js";import{r as u}from"./vendor_react-Bpl_dUPQ.js";import{B as f}from"./button-DkTu2F27.js";import{I as o}from"./input-l4wrzjtr.js";import{L as n}from"./label-CuJ9qwEk.js";import{C as x,a as g,b,c as v,d as j}from"./card-BAjRuEEQ.js";import{u as y}from"./index-C2INySnl.js";import{S as N}from"./SearchHeader-5zoZ1kxO.js";import"./vendor_router-0FUT4RNd.js";import"./index-B2MitdoE.js";import"./index-D8EubtY5.js";import"./index-B8LjdZBf.js";function I(){const[s,d]=u.useState({name:"",website:"",password:"",confirmPassword:""}),[l,m]=u.useState(!1),{toast:t}=y(),a=c=>{const{name:r,value:p}=c.target;d(i=>({...i,[r]:p}))},h=()=>{if(!s.name||!s.website||!s.password)return t({title:"Validation Error",description:"Business name, app URL, and password are required fields.",variant:"destructive"}),!1;if(s.password.length<6)return t({title:"Password Too Short",description:"Password must be at least 6 characters long.",variant:"destructive"}),!1;if(s.password!==s.confirmPassword)return t({title:"Passwords Don't Match",description:"Password and confirm password must match.",variant:"destructive"}),!1;try{new URL(s.website)}catch{return t({title:"Invalid URL",description:"Please enter a valid URL (e.g., https://yourstore.com)",variant:"destructive"}),!1}return!0},w=async c=>{if(c.preventDefault(),!!h()){m(!0);try{const r=new URL(s.website).hostname,i=await(await fetch("/api/business/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,domain:r,website:s.website,email:`${r.replace(/[^a-zA-Z0-9]/g,"")}@${r}`,password:s.password})})).json();i.success?(t({title:"Registration Successful",description:"Your business has been registered successfully! You can now log in and complete your profile in settings."}),d({name:"",website:"",password:"",confirmPassword:""})):t({title:"Registration Failed",description:i.error||"Failed to register business. Please try again.",variant:"destructive"})}catch(r){console.error("Registration error:",r),t({title:"Network Error",description:"Failed to connect to server. Please check your connection and try again.",variant:"destructive"})}finally{m(!1)}}};return e.jsxs("div",{className:"relative min-h-screen overflow-hidden text-white",children:[e.jsx("img",{src:"/pagebg.png",alt:"",className:"pointer-events-none absolute inset-0 -z-10 h-full w-full object-cover opacity-100"}),e.jsx(N,{showBackButton:!1}),e.jsx("div",{className:"max-w-md mx-auto p-6",children:e.jsxs(x,{className:"border-white/10 bg-white/5 text-white backdrop-blur-sm",children:[e.jsxs(g,{children:[e.jsx(b,{className:"text-white",children:"Business Registration"}),e.jsx(v,{className:"text-white/80",children:"Register your business to appear in product search suggestions. You can complete your profile later in the settings."})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",className:"text-white",children:"Business Name *"}),e.jsx(o,{id:"name",name:"name",value:s.name,onChange:a,placeholder:"e.g., My Online Store",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"website",className:"text-white",children:"App URL *"}),e.jsx(o,{id:"website",name:"website",value:s.website,onChange:a,placeholder:"https://yourstore.com",required:!0}),e.jsx("p",{className:"text-sm text-white/70",children:"Enter your website URL where customers can purchase products"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"password",className:"text-white",children:"Password *"}),e.jsx(o,{id:"password",name:"password",type:"password",value:s.password,onChange:a,placeholder:"Create a password (min. 6 characters)",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"confirmPassword",className:"text-white",children:"Confirm Password *"}),e.jsx(o,{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:a,placeholder:"Confirm your password",required:!0})]})]}),e.jsx(f,{type:"submit",className:"w-full rounded-full bg-white text-black border border-black/10 hover:bg-white/90",disabled:l,children:l?"Registering...":"Register Business"}),e.jsx("div",{className:"text-center text-sm text-white/70",children:e.jsx("p",{children:"You can complete your business profile later in the settings."})})]})})]})})]})}export{I as BusinessRegistration};
